<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>{{ page.title }}</title>
  <link rel="stylesheet" href="{{ '/assets/style.css' | relative_url }}">
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7715134134171575"
     crossorigin="anonymous"></script>
</head>
<body>
  <header>
    <h1><a href="{{ '/' | relative_url }}">üß† {{ site.title }}</a></h1>
    <nav>
      <a href="{{ '/' | relative_url }}">Home</a> |
      <a href="{{ '/about.html' | relative_url }}">About</a> |
      <a href="{{ '/contact.html' | relative_url }}">Contact</a> |
      <a href="{{ '/privacy.html' | relative_url }}">Privacy</a> |
      <a href="{{ '/feed.xml' | relative_url }}">RSS</a>
    </nav>
  </header>

  <main class="post-page">
    <!-- AdSense block -->
    <ins class="adsbygoogle"
         style="display:block; text-align:center; margin-bottom:20px;"
         data-ad-client="ca-pub-7715134134171575"
         data-ad-slot="1234567890"
         data-ad-format="auto"
         data-full-width-responsive="true"></ins>
    <script>
      (adsbygoogle = window.adsbygoogle || []).push({});
    </script>

    <article>
      <h2>{{ page.title }}</h2>
      <p class="post-meta"><strong>Published on:</strong> {{ page.date | date: "%B %d, %Y" }}</p>

      {% comment %}
      Resolve image:
      - Use page.image if present, otherwise fallback
      - Handle absolute vs. relative URLs
      - Add JS onerror to fallback gracefully
      {% endcomment %}
      {% if page.image %}
        {% assign raw_img = page.image %}
      {% else %}
        {% assign raw_img = '/assets/ai-hero.jpg' %}
      {% endif %}

      {% if raw_img contains '://' %}
        {% assign hero_src = raw_img %}
      {% else %}
        {% assign hero_src = raw_img | relative_url %}
      {% endif %}

      <img class="post-image"
           src="{{ hero_src }}"
           alt="{{ page.title | escape }}"
           loading="lazy"
           onerror="this.onerror=null;this.src='{{ '/assets/ai-hero.jpg' | relative_url }}';">

      <div class="post-content">
        {{ content }}
      </div>

      {% if page.source_url %}
        <p class="post-source">Source:
          <a href="{{ page.source_url }}" target="_blank" rel="noopener">
            {{ page.source }}
          </a>
        </p>
      {% endif %}

      <!-- Share -->
      <div style="margin-top:20px;">
        <strong>Share this post:</strong><br>
        <a href="https://twitter.com/intent/tweet?text={{ page.title | uri_escape }}&url={{ page.url | absolute_url }}"
           target="_blank">Share on X</a> |
        <a href="https://www.linkedin.com/shareArticle?mini=true&url={{ page.url | absolute_url }}&title={{ page.title | uri_escape }}"
           target="_blank">Share on LinkedIn</a>
      </div>
    </article>

    <!-- Related posts -->
    {% assign related = site.posts | where_exp:"p","p.url != page.url" | slice:0,3 %}
    {% if related.size > 0 %}
      <section style="margin-top:40px;">
        <h3>Related Posts</h3>
        <ul class="post-list">
          {% for post in related %}
            <li class="post-item">
              <a href="{{ post.url | relative_url }}">{{ post.title }}</a><br>
              <span class="post-meta">{{ post.date | date: "%B %d, %Y" }}</span>
            </li>
          {% endfor %}
        </ul>
      </section>
    {% endif %}

    <p><a href="{{ '/' | relative_url }}">‚Üê Back to blog</a></p>
  </main>

  <footer>
    <div class="footer-inner">
      <div class="footer-copy">&copy; {{ "now" | date: "%Y" }} {{ site.title }} ‚Äî All rights reserved</div>
      <div class="social-icons">
        <a class="social-icon earnapp" href="https://earnapp.com/i/ruisans" target="_blank" rel="noopener">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 1.5a10.5 10.5 0 1 0 0 21 10.5 10.5 0 0 0 0-21zM11 6h2v7h-2V6zm1 12a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3z"/></svg>
          Earn with me
        </a>
      </div>
    </div>
  </footer>
</body>
</html>
